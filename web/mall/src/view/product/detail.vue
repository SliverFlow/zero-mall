<template>
  <div class="container">
    <div class="detail_title">
      <div class="content">
        <p>{{ product.name }}</p>
        <span>用户评价</span>
      </div>
    </div>

    <div class="detail_container">
      <div class="left">
        <el-carousel style="width: 560px;height: 560px;">
          <el-carousel-item
            v-for="item in product.image"
            :key="item.url"
            style="width: 560px;height: 560px;background-color:#ccc;"
          >
            <el-image
              style="width: 100%;height: 100%;"
              :src="item.url"
            />
          </el-carousel-item>
        </el-carousel>
      </div>
      <div class="right">
        <p>{{ product.name }}</p>
        <div class="desc">
          <span>{{ product.subtitle }}</span>
        </div>
        <p class="business">{{ product.businessName }}</p>
        <!--价钱-->
        <span class="price">{{ product.price }}元</span>
        <!--分割线-->
        <div class="pr"/>
        <!--总计-->
        <div class="count">
          <div class="info">
            <p>{{ product.name }}</p>
            <span>{{ product.price }}元</span>
          </div>
          <div class="price_c">
            <p>总计：</p>
            <span>{{ product.price }}元</span>
          </div>
        </div>

        <!--购买或者加入购物车-->
        <div class="btn_list">
          <a>
            <svg
              t="1694941740472"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="5169"
              width="200"
              height="200"
            >
              <path
                d="M895.6 860.048l0.144-0.016-64-512-0.144 0.016A31.888 31.888 0 0 0 800 320h-110.816l-1.52-22.864h-0.016C684 203.28 606.736 128 512 128s-172 75.28-175.648 169.136h-0.032L334.8 320H224c-16.32 0-29.632 12.256-31.6 28.048l-0.144-0.016-64 512 0.144 0.016c-0.16 1.312-0.4 2.592-0.4 3.952a32 32 0 0 0 32 32h704a32 32 0 0 0 32-32c0-1.36-0.24-2.64-0.4-3.952zM400.176 301.36h-0.048C401.552 240.832 451.136 192 512 192s110.448 48.832 111.872 109.36h-0.048L625.056 320H398.944l1.232-18.64z m-80.112 240.512l0.144 0.016c-0.048 0.704-0.208 1.392-0.208 2.112a31.92 31.92 0 1 0 63.792 2.112l0.144 0.016L394.688 384h234.608l10.768 162.128 0.128-0.016A31.952 31.952 0 0 0 704 544c0-0.72-0.16-1.408-0.208-2.112l0.144-0.016L693.44 384h78.304l56 448H196.24l56-448h78.304l-10.48 157.872z"
                fill="#ffffff"
                p-id="5170"
              />
            </svg>
            购买</a>
          <a @click.prevent="addProductToCart">
            <svg
              t="1694941655090"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="4003"
              width="200"
              height="200"
            >
              <path
                d="M925.696 384q19.456 0 37.376 7.68t30.72 20.48 20.48 30.72 7.68 37.376q0 20.48-7.68 37.888t-20.48 30.208-30.72 20.48-37.376 7.68l-287.744 0 0 287.744q0 20.48-7.68 37.888t-20.48 30.208-30.72 20.48-37.376 7.68q-20.48 0-37.888-7.68t-30.208-20.48-20.48-30.208-7.68-37.888l0-287.744-287.744 0q-20.48 0-37.888-7.68t-30.208-20.48-20.48-30.208-7.68-37.888q0-19.456 7.68-37.376t20.48-30.72 30.208-20.48 37.888-7.68l287.744 0 0-287.744q0-19.456 7.68-37.376t20.48-30.72 30.208-20.48 37.888-7.68q39.936 0 68.096 28.16t28.16 68.096l0 287.744 287.744 0z"
                p-id="4004"
                fill="#ffffff"
              />
            </svg>
            加入购物车</a>
        </div>

        <!--商品标签-->
        <div class="tag_list">
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>7天无理由退货（到店自取拆封后不支持）</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>包邮</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>官方发货</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>100天价格保障</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>运费说明</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>7天无理由退货（到店自取拆封后不支持）</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>包邮</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>官方发货</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>100天价格保障</span>
          </div>
          <div class="tag">
            <svg
              t="1694942582119"
              class="icon"
              viewBox="0 0 1024 1024"
              version="1.1"
              xmlns="http://www.w3.org/2000/svg"
              p-id="6447"
              width="200"
              height="200"
            >
              <path
                d="M512 0C228.430769 0 0 228.430769 0 512s228.430769 512 512 512 512-228.430769 512-512S795.569231 0 512 0z m0 945.230769C271.753846 945.230769 78.769231 752.246154 78.769231 512S271.753846 78.769231 512 78.769231s433.230769 192.984615 433.230769 433.230769-192.984615 433.230769-433.230769 433.230769z"
                fill="#b7b7b1"
                p-id="6448"
              />
              <path
                d="M716.8 330.830769l-208.738462 248.123077c-15.753846 15.753846-43.323077 19.692308-59.076923 7.876923L299.323077 472.615385c-15.753846-11.815385-43.323077-7.876923-55.138462 7.876923-11.815385 15.753846-7.876923 43.323077 7.876923 55.138461l149.661539 114.215385c19.692308 15.753846 47.261538 23.630769 74.830769 23.630769 35.446154 0 70.892308-15.753846 94.523077-43.323077l208.738462-248.123077c15.753846-15.753846 11.815385-43.323077-3.938462-55.138461-19.692308-15.753846-43.323077-15.753846-59.076923 3.938461z"
                fill="#b7b7b1"
                p-id="6449"
              />
            </svg>
            <span>运费说明</span>
          </div>

        </div>
      </div>
    </div>
  </div>
</template>

<script setup>
import { useRoute, useRouter } from 'vue-router'
import { ref } from 'vue'
import { productFindApi } from '@/api/product.js'
import { useUserStore } from '@/pinia/model/user.js'
import { ElMessageBox, ElNotification } from 'element-plus'
import { cartCreateApi } from '@/api/cart.js'

const route = useRoute()
const router = useRouter()
const productId = ref(route.query.id)
const product = ref({})
const userStore = useUserStore()
const isLogin = userStore.isLogin

const loadData = async() => {
  const res = await productFindApi({ productId: productId.value })
  product.value = res.data
}
loadData()

const addProductToCart = () => {
  if (!isLogin) {
    // 提示进入登录界面
    ElMessageBox.confirm(
      '加入购物车需要您登录账号，是否前往进入登录界面',
      '提示',
      {
        confirmButtonText: '确认',
        cancelButtonText: '取消',
        type: 'warning',
      }
    ).then(() => {
      router.push({ name: 'Login', query: { path: '/product/detail?id=' + productId.value } })
    })
  } else {
    createCart()
  }
}

// 创建购物车
const createCart = async() => {
  const res = await cartCreateApi({ productId: productId.value, quantity: 1, checked: 1 })
  if (res.code === 0) {
    ElNotification({
      title: '通知',
      message: '当前商品以成功添加您的进购物车',
      type: 'success',
    })
  }
}
</script>

<style scoped lang="scss">
@import '@/style/detail.scss';
</style>
